<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Developing applications using libdrc &#8212; libdrc project</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b20cc3f5" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=eeb27264" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/jquery-1.9.1.min.js"></script>
    <script src="../_static/js/jquery-fix.js"></script>
    <script src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reverse engineering and internal details" href="re/index.html" />
    <link rel="prev" title="Network configuration for Wii U GamePad &lt;-&gt; PC" href="network.html" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="icon" type="image/x-icon" href="../_static/favicon.ico" />
<link rel="shortcut icon" type="image/x-icon" href="../_static/favicon.ico" />

  </head><body>

  <div id="navbar" class="navbar-inverse navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="../index.html" title="libdrc home">
          <img class="logo" src="../_static/logo_pixel.svg" width="110" height="40" alt="libdrc" onerror="this.removeAttribute('onerror'); this.src='../_static/logo_pixel.png'" />
        </a>
        
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            <li ><a href="../download.html">Download</a></li>
            
            <li ><a href="../examples.html">Examples</a></li>
            
            <li class="active"><a href="index.html">Documentation</a></li>
            
            <li ><a href="../development.html">Development</a></li>
            
            <li ><a href="../support.html">Support</a></li>
            
            
          </ul>

          
        </div>
    </div>
  </div>

<div id="overall">
<div class="container">
    <div class="row">
    <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Developing applications using libdrc</a><ul>
<li><a class="reference internal" href="#using-the-wii-u-gamepad-in-your-application">Using the Wii U GamePad in your application</a></li>
</ul>
</li>
</ul>
<div class="row text-right">
    <a href="network.html" class="btn btn-default"
        title="Previous Chapter: Network configuration for Wii U GamePad <-> PC"><i class="fa fa-arrow-left"></i> Network configuration for...</a>
    <a href="re/index.html" class="btn btn-default"
        title="Next Chapter: Reverse engineering and internal details">Reverse engineering and... <i class="fa fa-arrow-right"></i> </a>
</div>
  <a href="../_sources/docs/usage.rst.txt"
     rel="nofollow"><i class="fa fa-file-text nostyle"></i> Source of this page</a>
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
    </div>
        <div class="col-md-9">
            
  <section id="developing-applications-using-libdrc">
<h1>Developing applications using libdrc<a class="headerlink" href="#developing-applications-using-libdrc" title="Link to this heading">¶</a></h1>
<section id="using-the-wii-u-gamepad-in-your-application">
<h2>Using the Wii U GamePad in your application<a class="headerlink" href="#using-the-wii-u-gamepad-in-your-application" title="Link to this heading">¶</a></h2>
<p>libdrc provides a class called <code class="docutils literal notranslate"><span class="pre">drc::Streamer</span></code> in the <code class="docutils literal notranslate"><span class="pre">drc/streamer.h</span></code>
header file. <code class="docutils literal notranslate"><span class="pre">drc::Streamer</span></code> objects expose 5 major functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">streamer-&gt;Start()</span></code> starts streaming data to the Wii U GamePad.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">streamer-&gt;Stop()</span></code> stops the streamer object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">streamer-&gt;PushVidFrame(&amp;pixels,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">pixel_format)</span></code> pushes a
video frame to the Wii U GamePad. <code class="docutils literal notranslate"><span class="pre">pixels</span></code> should be a <code class="docutils literal notranslate"><span class="pre">vector</span></code> of
<code class="docutils literal notranslate"><span class="pre">width</span> <span class="pre">*</span> <span class="pre">height</span></code> pixels represented in the given pixel format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">streamer-&gt;PushAudSamples(samples)</span></code> pushes audio samples to the Wii U
GamePad. The API currently expects sound data sampled at 48KHz with two
interlaced channels (<code class="docutils literal notranslate"><span class="pre">samples[0]</span></code> is for the left audio channel,
<code class="docutils literal notranslate"><span class="pre">samples[1]</span></code> is for the right audio channel, …).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">streamer-&gt;PollInput(&amp;input)</span></code> gets the most recent input data received from
the GamePad.</p></li>
</ul>
<p>Adding basic support for the Wii U GamePad in an already existing application
is a relatively easy task:</p>
<ul class="simple">
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">drc::Streamer</span></code> global object/singleton and <code class="docutils literal notranslate"><span class="pre">Start()</span></code> it when
starting the program, before the first frame is rendered.</p></li>
<li><p>To handle input from the GamePad, two possibilities are offered to library
users. The easiest solution is to use the <code class="docutils literal notranslate"><span class="pre">SystemInputFeeder</span></code> utility to
send GamePad data to the operating system (on Linux, via the <code class="docutils literal notranslate"><span class="pre">uinput</span></code> API).
This should allow the application to make use of the GamePad in a transparent
way if it already has support for other game input devices. To enable this
utility, use the <code class="docutils literal notranslate"><span class="pre">EnableSystemInputFeeder</span></code> method of the streamer object.
The second, harder way is to write specific input handling code for the
GamePad using the <code class="docutils literal notranslate"><span class="pre">PollInput</span></code> method. This is the only way to get access to
some features of the GamePad like the touchscreen or the battery status
informations.</p></li>
<li><p>To stream video, the application needs to provide the raw image pixels to be
streamed to libdrc. For that, OpenGL software can use <code class="docutils literal notranslate"><span class="pre">glReadPixels</span></code> (slow)
or <em>Pixel Buffer Objects (PBOs)</em> in order to fetch the GPU rendering buffer.
Then, this image can be sent to libdrc via the <code class="docutils literal notranslate"><span class="pre">PushVidFrame</span></code> streamer
function.</p></li>
<li><p>To stream audio, the application needs to provide the raw audio samples to
libdrc. Audio mixing is usually being done in software, refer to the specific
audio API documentation to learn how to read the raw audio samples before
they are sent to the operating system. These samples can then be pushed to
libdrc via the <code class="docutils literal notranslate"><span class="pre">PushAudSamples</span></code> function.</p></li>
</ul>
</section>
</section>


        </div>
          
        
            <div class="row text-right">
    <a href="network.html" class="btn btn-default"
        title="Previous Chapter: Network configuration for Wii U GamePad <-> PC"><i class="fa fa-arrow-left"></i> Network configuration for...</a>
    <a href="re/index.html" class="btn btn-default"
        title="Next Chapter: Reverse engineering and internal details">Reverse engineering and... <i class="fa fa-arrow-right"></i> </a>
</div>
        
    </div>
</div>
</div>
<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                        &copy; Copyright 2013, Mema Hacking.<br/>
                    Powered by <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.2.6.<br/>
            </div>

            <div class="col-md-4">
            </div>

            <div class="col-md-4">
                <a href="#">Back to top</a>
                
                    <br/>
                    
  <a href="../_sources/docs/usage.rst.txt"
     rel="nofollow"><i class="fa fa-file-text nostyle"></i> Source of this page</a>
                
            </div>

        </div>
    </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46672635-1', 'libdrc.org');
  ga('send', 'pageview');
</script>
  </body>
</html>