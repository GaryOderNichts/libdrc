<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Audio streaming protocol &#8212; libdrc project</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b20cc3f5" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=eeb27264" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/jquery-1.9.1.min.js"></script>
    <script src="../../_static/js/jquery-fix.js"></script>
    <script src="../../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Input streaming protocol" href="sc-input.html" />
    <link rel="prev" title="Video streaming protocol" href="sc-vstrm.html" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="icon" type="image/x-icon" href="../../_static/favicon.ico" />
<link rel="shortcut icon" type="image/x-icon" href="../../_static/favicon.ico" />

  </head><body>

  <div id="navbar" class="navbar-inverse navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="../../index.html" title="libdrc home">
          <img class="logo" src="../../_static/logo_pixel.svg" width="110" height="40" alt="libdrc" onerror="this.removeAttribute('onerror'); this.src='../../_static/logo_pixel.png'" />
        </a>
        
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            <li ><a href="../../download.html">Download</a></li>
            
            <li ><a href="../../examples.html">Examples</a></li>
            
            <li class="active"><a href="../index.html">Documentation</a></li>
            
            <li ><a href="../../development.html">Development</a></li>
            
            <li ><a href="../../support.html">Support</a></li>
            
            
          </ul>

          
        </div>
    </div>
  </div>

<div id="overall">
<div class="container">
    <div class="row">
    <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Audio streaming protocol</a><ul>
<li><a class="reference internal" href="#protocol-header">Protocol header</a></li>
<li><a class="reference internal" href="#video-format-header">Video format header</a></li>
</ul>
</li>
</ul>
<div class="row text-right">
    <a href="sc-vstrm.html" class="btn btn-default"
        title="Previous Chapter: Video streaming protocol"><i class="fa fa-arrow-left"></i> Video streaming protocol</a>
    <a href="sc-input.html" class="btn btn-default"
        title="Next Chapter: Input streaming protocol">Input streaming protocol <i class="fa fa-arrow-right"></i> </a>
</div>
  <a href="../../_sources/docs/re/sc-astrm.rst.txt"
     rel="nofollow"><i class="fa fa-file-text nostyle"></i> Source of this page</a>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
    </div>
        <div class="col-md-9">
            
  <section id="audio-streaming-protocol">
<h1>Audio streaming protocol<a class="headerlink" href="#audio-streaming-protocol" title="Link to this heading">¶</a></h1>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Console Port</p></th>
<th class="head"><p>Pad Port</p></th>
<th class="head"><p>Direction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>50021</p></td>
<td><p>50121</p></td>
<td><p>Console ↔ Pad</p></td>
</tr>
</tbody>
</table>
<p>The audio streaming protocol, also known as <code class="docutils literal notranslate"><span class="pre">astrm</span></code>, is used to stream game
audio data from the Wii U to a GamePad, or to stream microphone data from a
GamePad to the Wii U. It is usually uncompressed, raw samples data, but the
firmware code seems to indicate support for basic compressed formats. At of Dec
2013 compressed streaming has not been seen used in the wild.</p>
<p>For some reason, the <code class="docutils literal notranslate"><span class="pre">astrm</span></code> protocol is also used to transmit video format
and timing information.</p>
<p>Each packet has an 8 byte header followed by payload data: either audio or
video format information.</p>
<section id="protocol-header">
<h2>Protocol header<a class="headerlink" href="#protocol-header" title="Link to this heading">¶</a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">AstrmHeader</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">u16</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">u16</span><span class="w"> </span><span class="n">mono</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">u16</span><span class="w"> </span><span class="n">vibrate</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">u16</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">       </span><span class="c1">// 0 is audio data, 1 is video format</span>
<span class="w">    </span><span class="n">u16</span><span class="w"> </span><span class="n">seq_id</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="n">u16</span><span class="w"> </span><span class="n">payload_size</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
<span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<img alt="../../_images/astrm-header.png" src="../../_images/astrm-header.png" />
<p>Known audio formats:</p>
<ul class="simple">
<li><p>0: PCM 24KHz</p></li>
<li><p>1: PCM 48KHz</p></li>
<li><p>2: ALAW 24KHz</p></li>
<li><p>3: ALAW 48KHz</p></li>
<li><p>4: ULAW 24KHz</p></li>
<li><p>5: ULAW 48KHz</p></li>
</ul>
<p>If the packet type flag indicates that the packet is audio data, the payload
following the header is interpreted as audio samples to be played on the
GamePad. The number of samples is inferred form the payload size.</p>
<p>If the packet type flag indicates that the packet is video format information,
all the other header fields are ignored and the payload is interpreted as a
video format header.</p>
</section>
<section id="video-format-header">
<h2>Video format header<a class="headerlink" href="#video-format-header" title="Link to this heading">¶</a></h2>
<p>One video format packet is sent before each video frame is sent via <code class="docutils literal notranslate"><span class="pre">vstrm</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">AstrmVideoFormat</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">timestamp</span><span class="p">;</span>
<span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">unknown_freq_0</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">unknown_freq_1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">video_format</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The timestamp should match the timestamp sent in the <code class="docutils literal notranslate"><span class="pre">vstrm</span></code> packets for that
frame.</p>
</section>
</section>


        </div>
          
        
            <div class="row text-right">
    <a href="sc-vstrm.html" class="btn btn-default"
        title="Previous Chapter: Video streaming protocol"><i class="fa fa-arrow-left"></i> Video streaming protocol</a>
    <a href="sc-input.html" class="btn btn-default"
        title="Next Chapter: Input streaming protocol">Input streaming protocol <i class="fa fa-arrow-right"></i> </a>
</div>
        
    </div>
</div>
</div>
<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                        &copy; Copyright 2013, Mema Hacking.<br/>
                    Powered by <a href="http://sphinx.pocoo.org/">Sphinx</a> 7.2.6.<br/>
            </div>

            <div class="col-md-4">
            </div>

            <div class="col-md-4">
                <a href="#">Back to top</a>
                
                    <br/>
                    
  <a href="../../_sources/docs/re/sc-astrm.rst.txt"
     rel="nofollow"><i class="fa fa-file-text nostyle"></i> Source of this page</a>
                
            </div>

        </div>
    </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46672635-1', 'libdrc.org');
  ga('send', 'pageview');
</script>
  </body>
</html>